<%= render @post %>

<div>
  <%= link_to "Back to posts", posts_path %>
  <% if user_signed_in? %>
    | <%= link_to "Edit this post", edit_post_path(@post) %>
    <p><%= button_to "Destroy this post", @post, method: :delete %></p>

    <h3>Comments</h3>
    <% @post.comments.each do |comment| %>
      <p><strong><%= comment.user.email %></strong>: <%= comment.body %>
      <% if user_signed_in? && current_user.id == comment.user_id %>
        <%= link_to "Edit", edit_post_comment_path(@post, comment) %> 
        <%= button_to "Delete", post_comment_path(@post, comment), method: :delete %>
      <% end %>
      </p>
    <% end %>
    <%= form_with(model: [@post, Comment.new], local: true) do |form| %>
      <div>
        <%= form.label :body, "New comment" %><br>
        <%= form.text_area :body %>
      </div>
      <%= form.submit "Post comment" %>
    <% end %>
  <% end %>
</div>
